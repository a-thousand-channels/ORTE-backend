= simple_form_for([@map,@layer,@place]) do |f|
  .grid-x.grid-padding-x
    .large-3.medium-3.cell
      %h1 Place
    .large-4.medium-4.cell
      %div
        - if @place.layer.title && params[:action] == 'new'
          %p.inline
            = link_to map_url(@place.layer.map) do
              = @place.layer.map.title
            \>
            = link_to map_layer_url(@place.layer.map,@place.layer) do
              = @place.layer.title
            = f.association :layer, as: :hidden
        - else
          %p.inline= f.label :layer
          %div.inline#layer_selector.hide
            = f.association :layer, :collection => @place.layer.map.layers, :label_method => :title, :value_method => :id, label: false, include_blank: false
          %div.inline#layer_display
            = @place.layer.title
      %p.clear
        %span.name Address
        - if @old_place
          = @old_place.full_address
          \->
        = @place.full_address
        %br
        %span.name Coordinates
        - if @old_place
          #{@old_place.lat[0..4]}/#{@old_place.lon[0..4]}
          \-->
        - if @place.lat && @place.lon
          #{@place.lat[0..4]}/#{@place.lon[0..4]}
        = f.input :lat, as: :hidden
        = f.input :lon, as: :hidden

    .large-5.medium-5.cell
      .grid-x
        .large-6.medium-6.small-6.cell
          - if params[:action] == 'edit'
            %p.text-right
              %span.name.middle New position?
        .large-6.medium-6.small-6.cell
          #switch.switch.inline
            %input{:name=>"place[published]", :class => "switch-input", :id => "place_published", :type => "checkbox", :checked => @place.published }
            %label.switch-paddle{:for=>"place_published"}
              %span.show-for-sr
                Publish
              %span.switch-active{:aria-hidden=>"true"} No
              %span.switch-inactive{:aria-hidden=>"true"} Yes

          - if params[:action] == 'edit'
            %p#remap.clear
              = link_to map_layer_path(@place.layer.map,@place.layer,remap: true, place_id: @place.id), :class =>"button small" do
                %strong RE-MAP

  .grid-x.grid-padding-x
    .large-12.cell
      = f.error_notification
      = f.input :title

  .grid-x.grid-padding-x
    .large-6.medium-6.cell
      .form-inputs
        .grid-x
          .large-6.medium-6.small-7.cell
            = f.input :startdate, as: :hidden
            = f.label :startdate_data do
              Start date
              %i.fi.fi-info{"data-tooltip"=>true, :title=>"If you just want to define the year, like \"1995\", type in the date 1.1.1995"}
            = f.input :startdate_date, as: :date, html5: true, :label => false
          .large-6.medium-6.small-5.cell
            = f.input :startdate_time, as: :time, html5: true, :label => 'Start time', :input_html => {:size => 5, class: 'input-time'}
        .grid-x
          .large-6.medium-6.small-7.cell
            = f.input :enddate, as: :hidden
            = f.label :enddate_data do
              End date
              %i.fi.fi-info{"data-tooltip"=>true, :title=>"If you just want to define the year, like \"1995\", type in the date 1.1.1995"}
            = f.input :enddate_date, as: :date, html5: true, :label => false
          .large-6.medium-6.small-5.cell
            = f.input :enddate_time, as: :time, html5: true, :label => 'End time', :input_html => {:size => 5, class: 'input-time'}
        = tinymce
        = f.input :teaser, :label => 'Text', :input_html => {:rows => 8, class: 'large-text tinymce' }
        %hr
        .form-actions
          = f.button :submit, :class => "button"
    .large-6.medium-6.cell
      .form-inputs
        = f.input :location, :label => 'Name of Location', :input_html => {:placeholder => 'Name' }
        %p.hint Only needed, if different to the title
        = f.input :address, :input_html => {:placeholder => 'Street + Number' }
        .grid-x.grid-padding-x
          .small-4.cell
            = f.input :zip
          .small-8.cell
            = f.input :city
        = f.input :link, :label => 'Weblink', :placeholder => 'https://'
        %p.hint Does this place (or location) has a website?
        - # = f.input :images, input_html: { accept: ('image'), multiple: true  }
        - if @place.images.count > 0
          - @place.images.each do |img|
            - # = image_tag img.variant(resize_to_limit: [100, 100]).processed
            = link_to url_for(img) do
              = image_tag url_for(img)
